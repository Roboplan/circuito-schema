{
  "definitions": {
    "spec": {
      "type": "string",
      "default": "",
      "enum": [
        "",
        "SDA",
        "SCL",
        "SCK",
        "MISO",
        "MOSI",
        "ADC",
        "DigitalIn",
        "DigitalIn-Int",
        "DigitalOut",
        "PWM"
      ]
    },
    "voltage": {
      "type": "string",
      "enum": ["GND", "3.3v", "3.7v", "5v", "6v", "7.4", "9v", "12v"]
    }
  },
  "type": "object",
  "required": ["name", "blockId", "category"],
  "properties": {
    "name": {
      "type": "string",
      "title": "Name"
    },
    "blockId": {
      "type": "string",
      "title": "Block ID"
    },
    "category": {
      "title": "Category",
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "output",
          "input",
          "controller",
          "power",
          "connectivity",
          "powerConnector",
          "support",
          "iot"
        ]
      },
      "uniqueItems": true
    },
    "app": {
      "type": "object",
      "title": "Appearance",
      "required": ["appName", "tags", "desc"],
      "properties": {
        "appName": {
          "type": "string",
          "title": "Application name"
        },
        "numericName": {
          "type": "string",
          "title": "Numeric name"
        },
        "shortName": {
          "type": "string",
          "title": "Short name"
        },
        "image": {
          "type": "string",
          "title": "Image"
        },
        "tags": {
          "title": "Tags",
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "output",
              "input",
              "controller",
              "power",
              "connectivity",
              "powerConnector",
              "support",
              "iot"
            ]
          },
          "uniqueItems": true
        },
        "visible": {
          "type": "boolean",
          "title": "Visible in application"
        },
        "indicators": {
          "type": "object",
          "title": "Indicators",
          "properties": {
            "verified": {
              "type": "boolean",
              "default": false
            },
            "code": {
              "type": "boolean",
              "title": "Has coder support",
              "default": false
            },
            "solder": {
              "type": "boolean",
              "title": "Requires soldering",
              "default": false
            }
          }
        },
        "desc": {
          "type": "string",
          "title": "Description"
        }
      }
    },
    "notes": {
      "type": "string"
    },
    "circuits": {
      "type": "array",
      "title": "",
      "items": {
        "type": "object",
        "required": ["name", "priority"],
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "priority": {
            "type": "integer",
            "title": "Priority",
            "default": 0
          },
          "supportedControllers": {
            "type": "array",
            "title": "Supported Controllers",
            "items": {
              "type": "string",
              "enum": [
                "ATMega328P",
                "ArduinoLeonardo",
                "ArduinoMega",
                "ArduinoMicro",
                "ArduinoNano",
                "ArduinoProMini5v",
                "ArduinoUno",
                "ATTiny85",
                "Teensy32",
                "ArduinoGemma",
                "ArduinoProMini3v3",
                "ESP32DevKitC",
                "NodeMCU",
                "RPI3B"
              ]
            },
            "uniqueItems": true
          },
          "parts": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["name", "part"],
              "properties": {
                "name": {
                  "type": "string",
                  "title": "Instance name"
                },
                "part": {
                  "type": "string",
                  "title": "Part"
                }
              }
            }
          },
          "requiredBlocks": {
            "type": "array",
            "title": "Support Blocks [list only support and power blocks]",
            "items": {
              "type": "object",
              "properties": {
                "cost": {
                  "type": "integer",
                  "title": "Cost",
                  "default": 0
                },
                "blocks": {
                  "type": "array",
                  "title": "Blocks",
                  "items": {
                    "type": "string",
                    "enum": []
                  },
                  "uniqueItems": true
                }
              }
            }
          },
          "coders": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "wires": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "from": {
                  "type": "string",
                  "default": ""
                },
                "to": {
                  "type": "string",
                  "default": ""
                }
              }
            }
          },
          "ports": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["name"],
              "properties": {
                "name": {
                  "type": "string",
                  "title": "Port name",
                  "default": ""
                },
                "interface": {
                  "type": "object",
                  "properties": {
                    "codename": {
                      "title": "Port codename [show for category controller only]",
                      "type": "string",
                      "default": ""
                    },
                    "requires": {
                      "type": "array",
                      "title": "Requires",
                      "items": {
                        "type": "object",
                        "properties": {
                          "cost": {
                            "type": "integer",
                            "default": 0
                          },
                          "spec": { "$ref": "#/definitions/spec" },
                          "voltage": { "$ref": "#/definitions/voltage" }
                        }
                      }
                    },
                    "provides": {
                      "type": "array",
                      "title": "Provides",
                      "items": {
                        "type": "object",
                        "properties": {
                          "spec": { "$ref": "#/definitions/spec" },
                          "voltage": { "$ref": "#/definitions/voltage" }
                        }
                      }
                    },
                    "requiresLoad": {
                      "type": "integer"
                    },
                    "providesLoad": {
                      "type": "integer"
                    },
                    "unique": {
                      "type": "boolean"
                    },
                    "isBus": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
